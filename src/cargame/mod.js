let debugMode=!1;document.addEventListener("keydown",(function(e){84===e.keyCode||"T"===e.keyCode?(movePlayer(-1),debugMode&&console.log("Pohyb hore")):71===e.keyCode||"G"===e.keyCode?(movePlayer(1),debugMode&&console.log("Pohyb dole")):68!=e.keyCode&&"D"!=e.keyCode||(debugMode?(debugMode=!1,console.log("Debug bol vypnuty")):(debugMode=!0,console.log("Debug bol zapnuty")))})),clearInterval(ival);let canvas=null,ctx=null;function createCanvas(){gameContainer=document.getElementById("game-container"),document.getElementById("game-table")&&document.getElementById("game-table").remove(),canvas=document.createElement("canvas"),canvas.id="canvas",canvas.width=gameWidth*size,canvas.height=gameHeight*size,ctx=canvas.getContext("2d"),document.getElementById("game-container").appendChild(canvas),debugMode&&console.log("Vytvaram canvas")}function drawGreen(){let e=new Image;e.src="https://www.publicdomainpictures.net/pictures/30000/velka/solid-green-background.jpg",ctx.drawImage(e,0,0,gameWidth*size,gameHeight*size),debugMode&&console.log("Kreslim zelene pozadie")}const redColor="https://www.publicdomainpictures.net/pictures/30000/velka/solid-red-background.jpg",blackColor="https://upload.wikimedia.org/wikipedia/commons/c/c8/Very_Black_screen.jpg",grayColor="https://www.publicdomainpictures.net/pictures/200000/velka/plain-gray-background.jpg",whiteColor="https://www.publicdomainpictures.net/pictures/30000/velka/plain-white-background.jpg",car="car.png";function drawPoint(e,o,n,a){let t=new Image,d=""+a;t.src=e;let i=o,r=n;0=="auto".localeCompare(d)?ctx.drawImage(t,i*size,r*size-45,72,90):ctx.drawImage(t,i*size,r*size,12,12)}window.drawWithStyle=function(e,o,n){for(var a=0;a<e.length;a++)"undefined"!==typeof e[a]?drawPoint(o,e[a][0],e[a][1],n):console.log("points["+a+"] is undefined");debugMode&&console.log("Pouzitie funkcie drawWithStyle")},window.drawPlayer=function(e,o){var n=[[e,o+1]];canvas&&drawWithStyle(n,car,"auto")},window.drawEdgeLine=function(e){var o=[],n=[],a=6,t=iter%a,d=[],i=[];0===t?(d=[0,1,2],i=[3,4,5]):1===t?(d=[0,1,5],i=[2,3,4]):2===t?(d=[0,4,5],i=[1,2,3]):3===t?(d=[3,4,5],i=[0,1,2]):4===t?(d=[2,3,4],i=[0,1,5]):5===t&&(d=[1,2,3],i=[0,4,5]),o=e.filter((function(e,o){var n=e[0]%a;return d.indexOf(n)>-1})),n=e.filter((function(e,o){var n=e[0]%a;return i.indexOf(n)>-1})),canvas&&(drawWithStyle(o,redColor,"cervena"),drawWithStyle(n,whiteColor,"biela"),debugMode&&console.log("Pouzitie funkcie drawEdgeLine"))},window.drawLine=function(e){debugMode&&console.log("Pouzitie funkcie drawLine");var o=fillLinePoints(e),n=fillRoadLine(o);canvas&&drawWithStyle(n,grayColor,"cesta");var a=fillEdgeLine(o);drawEdgeLine(a)},speed=5,clearInterval(ival),window.gameLoop=function(){canvas||createCanvas(),drawGreen(),undrawLine(),iter%gameWidth===0&&0!==iter&&bumpLine(),moveLine(),drawLine(line),drawPlayer(playerTx,playerTy),collision()&&(console.log("collision"),clearInterval(ival),setTimeout((function(){alert("Prehral si!")}),500)),iter++,score+=speed},ival=setInterval(gameLoop,speed),game=document.getElementById("game-container");var reset=document.createElement("button");reset.innerHTML="Reset",reset.id="reset",game.appendChild(reset),document.getElementById("reset").onclick=()=>{debugMode&&console.log("Resetovanie hry"),clearInterval(ival),score=0,drawGreen(),line=[],setTimeout(generateLine(),500),playerTx=1,playerTy=Math.floor(gameHeight/2),ival=setInterval(gameLoop,speed)};var audio=new Audio("https://peterbartos157.github.io/PeterBartos157/soundtrack.mp3");audio.volume=1;var music=document.createElement("button");music.innerHTML="Music",music.id="music",game.appendChild(music),document.getElementById("music").onclick=()=>{1==audio.paused?(audio.play(),debugMode&&console.log("Hudba pustena")):(audio.pause(),debugMode&&console.log("Hudba pozastavena"))};var scoreSpeedInfo=null;function updateScoreSpeed(){game=document.getElementById("game-container"),null==scoreSpeedInfo?(game.appendChild(document.createElement("br")),scoreSpeedInfo=document.createElement("scoreSpeedInfo"),scoreSpeedInfo.textContent="Score:"+score+"\nSpeed:"+speed,scoreSpeedInfo.width=100,scoreSpeedInfo.height=20,scoreSpeedInfo.id="scoreSpeedInfo",game.appendChild(scoreSpeedInfo)):(scoreSpeedInfo=document.getElementById("scoreSpeedInfo"),scoreSpeedInfo.textContent="Score:"+score+"\nSpeed:"+speed)}var interval=setInterval(updateScoreSpeed,50);